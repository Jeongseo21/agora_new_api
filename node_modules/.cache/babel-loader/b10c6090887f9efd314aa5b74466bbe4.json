{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\hjs05\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\agora-new-api-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\hjs05\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\agora-new-api-test\\\\src\\\\App.js\";\nimport React, { useState } from \"react\";\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport AgoraRTM from \"agora-rtm-sdk\";\nimport useAgora from \"./hooks/useAgora\";\nimport useAgoraChat from \"./hooks/useAgoraChat\";\nimport MediaPlayer from \"./components/MediaPlayer\";\nimport \"./Call.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nvar client = AgoraRTC.createClient({\n  codec: \"h264\",\n  mode: \"rtc\"\n});\nvar chatClient = AgoraRTM.createInstance(\"2e5346b36d1f40b1bbc62472116d96de\");\nexport default function App() {\n  var _this = this;\n\n  var _useState = useState(\"default\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      channel = _useState2[0],\n      setChannel = _useState2[1];\n\n  var channelName = channel;\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      textArea = _useState4[0],\n      setTextArea = _useState4[1];\n\n  var _useAgoraChat = useAgoraChat(chatClient, channelName),\n      messages = _useAgoraChat.messages,\n      sendChannelMessage = _useAgoraChat.sendChannelMessage,\n      color = _useAgoraChat.color;\n\n  var _useAgora = useAgora(client),\n      localAudioTrack = _useAgora.localAudioTrack,\n      localVideoTrack = _useAgora.localVideoTrack,\n      leave = _useAgora.leave,\n      join = _useAgora.join,\n      joinState = _useAgora.joinState,\n      remoteUsers = _useAgora.remoteUsers;\n\n  function submitMessage(event) {\n    console.log(event);\n\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      if (textArea.trim().length === 0) return;\n      sendChannelMessage(event.target.value);\n      setTextArea(\"\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"call\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"call-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \" Channel: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"channel\",\n    onChange: function onChange(event) {\n      setChannel(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"join\",\n    type: \"button\",\n    className: \"btn btn-primary btn-sm\",\n    disabled: joinState,\n    onClick: function onClick() {\n      join(channel, null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"Join\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"leave\",\n    type: \"button\",\n    className: \"btn btn-primary btn-sm\",\n    disabled: !joinState,\n    onClick: function onClick() {\n      leave();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"Leave\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"player-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"local-player-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MediaPlayer, {\n    videoTrack: localVideoTrack,\n    audioTrack: localAudioTrack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remotePlayers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, remoteUsers.map(function (user) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"remote-player-wrapper\",\n      key: user.uid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MediaPlayer, {\n      videoTrack: user.videoTrack,\n      audioTrack: user.audioTrack,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column py-5 px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, channel, \" \"), messages.map(function (data, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      key: \"chat\".concat(index + 1),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"font-size-15\",\n      style: {\n        color: data.user.color\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, \"\".concat(data.user.name, \" :\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-break\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, \" \".concat(data.message)));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, \" \", JSON.stringify(color), \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Type your message here\",\n    onChange: function onChange(e) {\n      return setTextArea(e.target.value);\n    },\n    value: textArea,\n    onKeyDown: submitMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/hjs05/OneDrive/바탕 화면/agora-new-api-test/src/App.js"],"names":["React","useState","AgoraRTC","AgoraRTM","useAgora","useAgoraChat","MediaPlayer","client","createClient","codec","mode","chatClient","createInstance","App","channel","setChannel","channelName","textArea","setTextArea","messages","sendChannelMessage","color","localAudioTrack","localVideoTrack","leave","join","joinState","remoteUsers","submitMessage","event","console","log","keyCode","preventDefault","trim","length","target","value","map","user","uid","videoTrack","audioTrack","data","index","name","message","JSON","stringify","e"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\r\n\r\nimport AgoraRTM from \"agora-rtm-sdk\";\r\n\r\nimport useAgora from \"./hooks/useAgora\";\r\nimport useAgoraChat from \"./hooks/useAgoraChat\";\r\nimport MediaPlayer from \"./components/MediaPlayer\";\r\nimport \"./Call.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nconst client = AgoraRTC.createClient({ codec: \"h264\", mode: \"rtc\" });\r\n\r\nconst chatClient = AgoraRTM.createInstance(\"2e5346b36d1f40b1bbc62472116d96de\");\r\n\r\nexport default function App() {\r\n  const [channel, setChannel] = useState(\"default\");\r\n\r\n  let channelName = channel;\r\n\r\n  const [textArea, setTextArea] = useState();\r\n\r\n  const { messages, sendChannelMessage, color } = useAgoraChat(\r\n    chatClient,\r\n    channelName\r\n  );\r\n\r\n  const {\r\n    localAudioTrack,\r\n    localVideoTrack,\r\n    leave,\r\n    join,\r\n    joinState,\r\n    remoteUsers\r\n  } = useAgora(client);\r\n\r\n  function submitMessage(event) {\r\n    console.log(event);\r\n    if (event.keyCode === 13) {\r\n      event.preventDefault();\r\n      if (textArea.trim().length === 0) return;\r\n      sendChannelMessage(event.target.value);\r\n      setTextArea(\"\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"call\">\r\n      <form className=\"call-form\">\r\n        {/* <label>\r\n          AppID:\r\n          <input\r\n            type=\"text\"\r\n            name=\"appid\"\r\n            onChange={(event) => {\r\n              setAppid(event.target.value);\r\n            }}\r\n          />\r\n        </label> */}\r\n        {/* <label>\r\n          Token(Optional):\r\n          <input\r\n            type=\"text\"\r\n            name=\"token\"\r\n            onChange={(event) => {\r\n              setToken(event.target.value);\r\n            }}\r\n          />\r\n        </label> */}\r\n        <label>\r\n          <b> Channel: </b>\r\n          <input\r\n            type=\"text\"\r\n            name=\"channel\"\r\n            onChange={(event) => {\r\n              setChannel(event.target.value);\r\n            }}\r\n          />\r\n        </label>\r\n\r\n        <div className=\"button-group\">\r\n          <button\r\n            id=\"join\"\r\n            type=\"button\"\r\n            className=\"btn btn-primary btn-sm\"\r\n            disabled={joinState}\r\n            onClick={() => {\r\n              join(channel, null);\r\n            }}\r\n          >\r\n            Join\r\n          </button>\r\n          <button\r\n            id=\"leave\"\r\n            type=\"button\"\r\n            className=\"btn btn-primary btn-sm\"\r\n            disabled={!joinState}\r\n            onClick={() => {\r\n              leave();\r\n            }}\r\n          >\r\n            Leave\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {/* <b> */}\r\n      {/* {JSON.stringify(joinState) === \"joined\"\r\n          ? \"No One is Here\"\r\n          : \"Welcome to the '\" + channel + \"' Room\"}\r\n      </b>{\" \"} */}\r\n      <br />\r\n      {/* <b> Local Video: {JSON.stringify(localVideoTrack)}</b> <br />\r\n      <b> Remote Video: {JSON.stringify(remoteUsers)}</b> */}\r\n      <br />\r\n      <div className=\"player-container\">\r\n        {/* <div> {client.uid} </div> */}\r\n        <div className=\"local-player-wrapper\">\r\n          {/* <p className=\"local-player-text\">\r\n            {localVideoTrack && `localTrack`}\r\n            {joinState && localVideoTrack ? `(${client.uid})` : \"\"}\r\n          </p> */}\r\n          <MediaPlayer\r\n            videoTrack={localVideoTrack}\r\n            audioTrack={localAudioTrack}\r\n          ></MediaPlayer>\r\n        </div>\r\n        <div className=\"remotePlayers\">\r\n          {remoteUsers.map((user) => (\r\n            <div className=\"remote-player-wrapper\" key={user.uid}>\r\n              {/* <p>Remote Player + {user.uid} </p> */}\r\n              {/* //   <p className=\"remote-player-text\">{`remoteVideo(${user.uid})`}</p> */}\r\n              <MediaPlayer\r\n                videoTrack={user.videoTrack}\r\n                audioTrack={user.audioTrack}\r\n              ></MediaPlayer>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"d-flex flex-column py-5 px-3\">\r\n        <h2>{channel} </h2>\r\n\r\n        {messages.map((data, index) => {\r\n          return (\r\n            <div className=\"row\" key={`chat${index + 1}`}>\r\n              <h5 className=\"font-size-15\" style={{ color: data.user.color }}>\r\n                {`${data.user.name} :`}\r\n              </h5>\r\n              <p className=\"text-break\">{` ${data.message}`}</p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <h2> {JSON.stringify(color)} </h2>\r\n        <input\r\n          placeholder=\"Type your message here\"\r\n          onChange={(e) => setTextArea(e.target.value)}\r\n          value={textArea}\r\n          onKeyDown={submitMessage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}